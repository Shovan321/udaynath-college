var userName="";var password="";var domainName="";var encodedDataWithDomainName;var encodedCredentials;var apiUrl="";var host="";var tm1Server="";var protocol;var uploadedFile;var uploadedParsedFile;var isBasicAuthSelected=true;var isCAMAuthSelected;var isAPIConnectionSelected;var isHostConnectionSelected=true;var processList=[];var alertMessageForUsername="";var isJsonFileUploaded=false;function toggleAuthentication(a){if(a.target.checked==true){isCAMAuthSelected=true;isBasicAuthSelected=false;document.getElementById("username").value="";document.getElementById("password").value="";document.getElementById("domain-name").value="";document.getElementById("usernameField").style.display="block";document.getElementById("passwordField").style.display="block";document.getElementById("domainField").style.display="block"}else{isBasicAuthSelected=true;isCAMAuthSelected=false;document.getElementById("username").value="";document.getElementById("password").value="";document.getElementById("domain-name").value="";document.getElementById("usernameField").style.display="block";document.getElementById("passwordField").style.display="block";document.getElementById("domainField").style.display="none"}}function toggleConnection(a){if(a.target.checked==true){isAPIConnectionSelected=true;isHostConnectionSelected=false;document.getElementById("apiUrl").value="";document.getElementById("host").value="";document.getElementById("tm1Server").value="";document.getElementById("apiUrlField").style.display="block";document.getElementById("hostField").style.display="none";document.getElementById("tm1ServerField").style.display="none";document.getElementById("protocolField").style.display="none"}else{isHostConnectionSelected=true;isAPIConnectionSelected=false;document.getElementById("apiUrl").value="";document.getElementById("host").value="";document.getElementById("tm1Server").value="";document.getElementById("apiUrlField").style.display="none";document.getElementById("hostField").style.display="block";document.getElementById("tm1ServerField").style.display="block";document.getElementById("protocolField").style.display="block"}}function manageForBasicAuth(b){if(isBasicAuthSelected){var a=document.getElementById("publish");if(b.value!=""){a.disabled=false}else{a.disabled=true}}else{if(isCAMAuthSelected){var a=document.getElementById("publish");if(b.value!=""){a.disabled=false}else{a.disabled=true}}}}function manageForCAMAuth(b){if(isBasicAuthSelected){var a=document.getElementById("publish");if(b.value!=""){a.disabled=false}else{a.disabled=true}}else{if(isCAMAuthSelected){var a=document.getElementById("publish");if(b.value!=""){a.disabled=false}else{a.disabled=true}}}}var data=[];function uploadJSONFile(d){isJsonFileUploaded=false;if(d!=undefined){if(d.target.files["0"].type=="application/json"){var c=d.target.files;var b=c[0];data=[];if(c&&b){var a=new FileReader();a.onload=function(e){uploadedFile=e.target.result;uploadedParsedFile=JSON.parse(uploadedFile);for(var f=0;f<uploadedParsedFile.length;f++){data.push(uploadedParsedFile[f].Name)}createProcessListAfterDataUpload(data);isJsonFileUploaded=true;return true};a.readAsBinaryString(b)}}else{alertify.message("The file must be a JSON file",0);isJsonFileUploaded=false;return false}}else{alertify.message("Please choose a file to upload",0);isJsonFileUploaded=false;return false}}function publishDetails(){userName=document.getElementById("username").value;password=document.getElementById("password").value;domainName=document.getElementById("domain-name").value;host=document.getElementById("host").value;tm1Server=document.getElementById("tm1Server").value;protocol=document.getElementById("protocol").value;apiUrl=document.getElementById("apiUrl").value;resultUrl=protocol+"://"+host+":"+tm1Server+"/api/v1";if(isValidBasicAuthAndHost()&&isJsonFileUploaded){encodedCredentials=window.btoa(userName+":"+password);$.ajax({type:"POST",url:resultUrl+"/Processes",data:uploadedFile,headers:{Authorization:"Basic "+encodedCredentials},contentType:"application/json",dataType:"json",success:function(a,b){processList=[];processList=a.value;alertify.success("Successfully published",0)},error:function(a){if(a.status==401){alertify.error(a.statusText,0)}if(a.status==400){alertify.error(JSON.parse(a.responseText).error.message,0)}}})}if(isValidBasicAuthAndApi()&&isJsonFileUploaded){encodedCredentials=window.btoa(userName+":"+password);$.ajax({type:"POST",url:apiUrl+"/Processes",data:uploadedFile,headers:{Authorization:"Basic "+encodedCredentials},contentType:"application/json",dataType:"json",success:function(a,b){processList=[];processList=a.value;alertify.success("Successfully published",0)},error:function(a){if(a.status==401){alertify.error(a.statusText,0)}if(a.status==400){alertify.error(JSON.parse(a.responseText).error.message,0)}}})}if(isValidCAMAuthAndHost()&&isJsonFileUploaded){encodedDataWithDomainName=window.btoa(userName+":"+password+":"+domainName);$.ajax({type:"POST",url:resultUrl+"/Processes",data:uploadedFile,headers:{Authorization:"CAMNamespace "+encodedDataWithDomainName},contentType:"application/json",dataType:"json",success:function(a,b){processList=[];processList=a.value;alertify.success("Successfully published",0)},error:function(a){if(a.status==401){alertify.error(a.statusText,0)}if(a.status==400){alertify.error(JSON.parse(a.responseText).error.message,0)}}})}if(isValidCAMAuthAndApi()&&isJsonFileUploaded){encodedDataWithDomainName=window.btoa(userName+":"+password+":"+domainName);$.ajax({type:"POST",url:apiUrl+"/Processes",data:uploadedFile,headers:{Authorization:"CAMNamespace "+encodedDataWithDomainName},contentType:"application/json",dataType:"json",success:function(a,b){processList=[];processList=a.value;alertify.success("Successfully published",0)},error:function(a){if(a.status==401){alertify.error(a.statusText,0)}if(a.status==400){alertify.error(JSON.parse(a.responseText).error.message,0)}}})}if(isJsonFileUploaded==false){alertify.message("Please choose a file to upload",0)}}function isValidBasicAuthAndHost(){if(isBasicAuthSelected==true&&isHostConnectionSelected==true){if(host==""||host==null||host==undefined){$("#host-alert").show();return false}if(tm1Server==""||tm1Server==null||tm1Server==undefined){$("#tm1-alert").show();return false}if(userName==""||userName==null||userName==undefined){$("#username-alert").show();return false}return true}}function isValidBasicAuthAndApi(){if(isBasicAuthSelected==true&&isAPIConnectionSelected==true){if(apiUrl==""||apiUrl==null||apiUrl==undefined){$("#api-alert").show();return false}if(userName==""||userName==null||userName==undefined){$("#username-alert").show();return false}return true}}function isValidCAMAuthAndHost(){if(isCAMAuthSelected==true&&isHostConnectionSelected==true){if(host==""||host==null&&host==undefined){$("#host-alert").show();return false}if(tm1Server==""||tm1Server==null||tm1Server==undefined){$("#tm1-alert").show();return false}if(userName==""||userName==null||userName==undefined){$("#username-alert").show();return false}if(domainName==""||domainName==null||domainName==undefined){$("#domain-alert").show();return false}return true}}function isValidCAMAuthAndApi(){if(isCAMAuthSelected==true&&isAPIConnectionSelected==true){if(apiUrl==""||apiUrl==null||apiUrl==undefined){$("#api-alert").show();return false}if(userName==""||userName==null||userName==undefined){$("#username-alert").show();return false}if(domainName==""||domainName==null||domainName==undefined){$("#domain-alert").show();return false}return true}}function clearUsernameAlert(){$("#username-alert").hide()}function clearPasswordAlert(){$("#password-alert").hide()}function clearDomainAlert(){$("#domain-alert").hide()}function clearHostAlert(){$("#host-alert").hide()}function clearTM1Alert(){$("#tm1-alert").hide()}function clearAPIAlert(){$("#api-alert").hide()}function createProcessListAfterDataUpload(c){$("#process-list").empty();$("#process-list-div").hide();ul=$("<ul id='process-list-ul'>");for(var b=0,a=c.length;b<a;++b){ul.append("<li>"+c[b]+"</li>")}$("#process-list").append(ul);$("#process-list-div").show()};